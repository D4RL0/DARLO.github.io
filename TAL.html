<!-- ... (código anterior) ... -->

<script type="module">
  // Referencia a la tabla HTML donde se mostrarán los estudiantes
  const studentTable = document.getElementById('studentTable');

  // Función para buscar un estudiante por ID
  function buscarPorId() {
    const searchId = document.getElementById('searchId').value;
    const database = getDatabase();
    const studentsRef = ref(database, 'students');

    // Escuchar cambios en la base de datos cuando se agrega un nuevo estudiante
    onValue(studentsRef, (snapshot) => {
      const students = snapshot.val();

      // Limpiar la tabla antes de mostrar los resultados
      studentTable.innerHTML = '';

      // Verificar si el estudiante con el ID proporcionado existe
      if (students) {
        const student = students[searchId];

        if (student) {
          // Mostrar la información del estudiante en el formulario
          document.getElementById('id').value = student.id;
          document.getElementById('nombre').value = student.nombre;
          document.getElementById('apellido').value = student.apellido;
          document.getElementById('edad').value = student.edad;
          document.getElementById('curso').value = student.curso;
          document.getElementById('fecha').value = student.fecha;

          // Crear fila en la tabla con los detalles del estudiante
          const row = studentTable.insertRow();
          row.innerHTML = `<td>${student.id}</td>
                           <td>${student.nombre}</td>
                           <td>${student.apellido}</td>
                           <td>${student.edad}</td>
                           <td>${student.curso}</td>
                           <td>${student.fecha}</td>
                           <td>
                             <button type="button" onclick="modificarEstudiante('${searchId}')">Modificar</button>
                             <button type="button" onclick="eliminarEstudiante('${searchId}')">Eliminar</button>
                           </td>`;
        } else {
          alert('Estudiante no encontrado');
        }
      }
    });
  }

  // Función para modificar un estudiante
  function modificarEstudiante(studentId) {
    // Obtener referencias a los campos del formulario
    const id = document.getElementById('id').value;
    const nombre = document.getElementById('nombre').value;
    const apellido = document.getElementById('apellido').value;
    const edad = document.getElementById('edad').value;
    const curso = document.getElementById('curso').value;
    const fecha = document.getElementById('fecha').value;

    // Obtener referencia a la base de datos de Firebase
    const database = getDatabase();
    const studentsRef = ref(database, 'students');

    // Actualizar la información del estudiante en la base de datos
    set(ref(studentsRef, studentId), {
      id,
      nombre,
      apellido,
      edad,
      curso,
      fecha
    });

    // Limpiar el formulario después de modificar
    document.getElementById('studentForm').reset();
    // Limpiar la tabla después de modificar
    studentTable.innerHTML = '';
  }

  // Función para eliminar un estudiante
  function eliminarEstudiante(studentId) {
    const database = getDatabase();
    const studentsRef = ref(database, 'students');

    // Eliminar el estudiante de la base de datos
    remove(ref(studentsRef, studentId));

    // Limpiar el formulario después de eliminar
    document.getElementById('studentForm').reset();
    // Limpiar la tabla después de eliminar
    studentTable.innerHTML = '';
  }
</script>
