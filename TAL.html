<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Estudiantes</title>
  <!-- Import Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
    import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js";

    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCdCWugXvKk8euGl8kmoqId18YfpeEHqw4",
      authDomain: "proyecto-2-26d9e.firebaseapp.com",
      databaseURL: "https://proyecto-2-26d9e-default-rtdb.firebaseio.com",
      projectId: "proyecto-2-26d9e",
      storageBucket: "proyecto-2-26d9e.appspot.com",
      messagingSenderId: "862517468422",
      appId: "1:862517468422:web:c6e6d6fca84867d3015287"
    };

    // Initialize Firebase
    initializeApp(firebaseConfig);

    // Your code for student registration and management goes here
  </script>
</head>
<body>
  <h1>Registro de Estudiantes</h1>

  <!-- Formulario de Registro -->
  <form id="studentForm">
    <label for="id">ID:</label>
    <input type="text" id="id" name="id" required>

    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required>

    <label for="apellido">Apellido:</label>
    <input type="text" id="apellido" name="apellido" required>

    <label for="edad">Edad:</label>
    <input type="number" id="edad" name="edad" required>

    <label for="curso">Curso:</label>
    <input type="text" id="curso" name="curso" required>

    <label for="fecha">Fecha de Matriculación:</label>
    <input type="date" id="fecha" name="fecha" required>

    <button type="button" onclick="registrarEstudiante()">Registrar</button>
  </form>

  <!-- Tabla de Estudiantes -->
  <h2>Lista de Estudiantes</h2>
  <table id="studentTable">
    <!-- La tabla se llenará dinámicamente con los datos de Firebase -->
  </table>

  <!-- Buscar por ID -->
  <label for="searchId">Buscar por ID:</label>
  <input type="text" id="searchId" name="searchId">
  <button type="button" onclick="buscarPorId()">Buscar</button>

  <script type="module">
    // Función para registrar un estudiante
    function registrarEstudiante() {
      // Obtener referencias a los campos del formulario
      const id = document.getElementById('id').value;
      const nombre = document.getElementById('nombre').value;
      const apellido = document.getElementById('apellido').value;
      const edad = document.getElementById('edad').value;
      const curso = document.getElementById('curso').value;
      const fecha = document.getElementById('fecha').value;

      // Obtener referencia a la base de datos de Firebase
      const database = getDatabase();

      // Crear un nuevo registro en la base de datos
      const newStudentRef = push(ref(database, 'students'), {
        id,
        nombre,
        apellido,
        edad,
        curso,
        fecha
      });

      // Limpiar el formulario después de registrar
      document.getElementById('studentForm').reset();
    }

    // Función para buscar un estudiante por ID
    function buscarPorId() {
      const searchId = document.getElementById('searchId').value;

      // TODO: Implementar lógica para buscar por ID y mostrar en la tabla
    }
  </script>
</body>
</html>
